{% extends 'base.html.twig' %}

{% block title %} {{ employee.name }}, {{ year }} {% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('css/mbo.report.css') }}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block body %}
    <table class="table"><tbody>
    <tr> 
        <th> Employee </th> 
        <td> 
            <a href="{{ path('person_show', {id: employee.id}) }}">
                {{ employee.name }}
            </a>
        </td>
    </tr>
    <tr>
        <th> Manager </th> 
        <td> 
            <a href="{{ path('people', {id: employee.getManager().id}) }}">
                {{ employee.getManager().name }} 
            </a>
        </td>
    </tr>
    </tbody></table>

    {{ form_start(form) }}
        <table class=" mbo table table-bordered">
        <caption> 
            Managment By Ojective: {{year}}
            <a href="{{ path('objective_entry_new', {'employee': employee.id, 'year': year}) }}"> New entry </a>
        </caption>
        <colgroup span="1"> </colgroup>
        <colgroup span="2"> </colgroup>
        <colgroup class="weight" span="2"> </colgroup>
        <colgroup class="score" span="3"> </colgroup>
        <thead>
            <th> </th>
            <th> Subject </th>
            <th> Description </th>
            <th> Weight </th>
            <th> Total </th>
            <th> Achieve </th>
            <th> Score </th>
            <th> Total </th>
        </thead>
        <tbody>
        {% set context = {partition: 'Direct', objectives: form.objectivesDirect} %}
        {{ include('mbo/mbo_partition.html.twig', context) }}

        {% set context = {partition: 'Indirect', objectives: form.objectivesIndirect} %}
        {{ include('mbo/mbo_partition.html.twig', context) }}

        {% set context = {partition: 'Infrastructure', objectives: form.objectivesInfrastructure} %}
        {{ include('mbo/mbo_partition.html.twig', context) }}

        <tr>
            <td colspan="3"> CEO </td>
            <td> 20% </td> <td> </td>
            <td> {{ form_widget(form.management.ceo_weight) }} </td> <td> </td>
            <td> </td>
        </tr>
        <tr>
            <td colspan="3"> VP </td>
            <td> 20% </td> <td> </td>
            <td> {{ form_widget(form.management.vp_weight) }} </td> <td> </td>
            <td> </td>
        </tr>
        </tbody></table>
        <button class="btn">{{ button_label|default('Save') }}</button>
    {{ form_end(form) }}
{% endblock %}
